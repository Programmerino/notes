There are a couple of strategies for this:
* [[constructive state machine]]
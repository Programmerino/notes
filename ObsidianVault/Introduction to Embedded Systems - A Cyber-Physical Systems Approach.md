## Analysis
```query
[ANALYSIS] file:"Introduction to Embedded Systems - A Cyber-Physical Systems Approach.md"
```
## Preface
### xi
* CPS is embedded software which interacts with physical processes, usually with a feedback loop
	* Computer science is “procedural epistemology”, while physical processes are not so procedural
	* Bridges sequential semantics with a concurrent physical world
### xiii
* CPS models are for dynamics, the evolution of a system state over time. They have formal properties which are predictive of the real physical system.
### 4
* The physical plant is the “physical” part of a cyber-physical system (e.g., mechanical parts, biological/chemical processors, human operators)
* Computational platforms are sensors, actuators, 1+ computers, and potentially 1+ OSes.
* The network fabric is networking
* The platforms and network fabric make up the cyber in cyber-physical system.
* A control law determines based on sensor data what commands to issue to the actuator
	* This creates a feedback control loop.
### 9
* Models gain a deeper understanding of a system through imitation and specify **what** a system does.
* Design is the structured creation of artifacts, it specifies **how** a system does what it does.
* Analysis dissects a system to gain a deeper understanding, the **why**
### 12
* A model has high fidelity if it accurately describes the properties of a system, and abstracts it if it omits details
* Static properties do not change during the operation of the system
## 2: Continuous Dynamics
### 18
* Classical mechanics deals with moving mechanical parts, and the same strategies are used for circuits, chemical processes, and biological processes and are typically modeled with differential/integral equations for continuous motion, and as instantaneous events for discrete motion (collisions). The mix of both is called hybrid systems modeling
### 19
* Motion of physical objects can be represented with 6 degrees of freedom: x, y, z, roll (angle of rotation around x), yaw (angle of rotation around y), pitch (rotation around z). Each of these are functions of time, yielding distance/angle along/relative to an axis (continuous-time signals). They can be combined into vector-valued functions as well.
* Newton's second law relates force with acceleration where acceleration is the second derivative of position: $\textbf{F}(t) = M\ddot{x}(t)$
	* This yields a force vector in three direction.
	* Velocity is the integral of acceleration, given by: $\forall t>0, \quad \dot{\mathbf{x}}(t)=\dot{\mathbf{x}}(0)+\int_0^t \ddot{\mathbf{x}}(\tau) d \tau$ where $\dot{\mathbf{x}}(0)$ is the initial velocity in three directions or $\forall t>0, \quad \dot{\mathbf{x}}(t)=\dot{\mathbf{x}}(0)+\frac{1}{M} \int_0^t \mathbf{F}(\tau) d \tau$.
	* Position is the integral of velocity, given by: $\begin{aligned} \mathbf{x}(t) & =\mathbf{x}(0)+\int_0^t \dot{\mathbf{x}}(\tau) d \tau \\ & =\mathbf{x}(0)+t \dot{\mathbf{x}}(0)+\frac{1}{M} \int_0^t \int_0^\tau \mathbf{F}(\alpha) d \alpha d \tau\end{aligned}$ where x(0) is the initial position.
* Torque is a three-element vector as a function of time: $\mathbf{T}(t)=\frac{d}{d t}(\mathbf{I}(t) \dot{\theta}(t))$ where $\textbf{I}(t)$ is the **moment of inertia tensor** of the object (3x3 matrix based on the geometry and orientation of the object). For a sphere, I can be replaced with a single constant scalar $\mathit{I}$. 
### 22
* Rotation velocity is the integral of acceleration: $\dot{\theta}(t)=\dot{\theta}(0)+\int_0^t \ddot{\theta}(\tau) d \tau$. For a spherical object, this becomes $\dot{\theta}(t)=\dot{\theta}(0)+\frac{1}{I} \int_0^t \mathbf{T}(\tau) d \tau$.
* Orientation is the integral of rotational velocity: $\begin{aligned} \theta(t) & =\theta(0)+\int_0^t \dot{\theta}(\tau) d \tau \\ & =\theta(0)+t \dot{\theta}(0)+\frac{1}{I} \int_0^t \int_0^\tau \mathbf{T}(\alpha) d \alpha d \tau\end{aligned}$
* A model-order reduction simplifies a model given some knowledge about where it is used. For example, we might be able to ignore the y-axis for something like a car's movement, since we don't expect it to rise or fall.
### 24
* A model of a physical system is a differential/integral equation relating input signals (force or torque) to output signals (position, orientation, velocity, or rotational velocity). These can be composed into larger systems.
### 25-27
* A continuous-time system is one which operates on continuous-time signals. An actor is a function mapping functions ($\mathbb{R} \rightarrow \mathbb{R}$) to functions of the same type given some parameters. An example of a potential actor would be one changing a component torque function to a component rotation velocity function given initial angular velocity and moment of inertia.
	* Composing actors is called cascade composition.
	* The Scale actor takes a parameter $a$ and multiply the result of $x_1$ by $a$ to produce $y_1$. It looks like a triangle
	* The Integrator actor takes an initial value $i$ and is defined by $\forall t \in \mathbb{R}, \quad y_2(t)=i+\int_0^t x_2(\tau) d \tau$. It is written with an integration symbol inside a box`
	* They can accept multiple input signals
	* A signal adder adds the results of two signals
		* For substracting, add a minus sign near the signal which should be $x_2(t)$ in $x_1(t) - x_2(t)$. You could describe this with: $\forall t \in \mathbb{R}, \forall x_1, x_2 \in(\mathbb{R} \rightarrow \mathbb{R}), \quad\left(S\left(x_1, x_2\right)\right)(t)=y(t)=x_1(t)-x_2(t)$
	* [ANALYSIS] It seems like these actors have a very clear representation in Functional Reactive Programming
### 28-29
* A system is causal if its output only depends on current and past inputs and is defined as…
	* For a continuous-time signal $x: \mathbb{R} \rightarrow A$ where $\left.x\right|_{t \leq \tau}$ is the "current and past inputs” at time $\tau$, then a continuous-time system $S: A^\mathbb{R} \rightarrow B^\mathbb{R}$ is causal if $\forall_{x_1,x_2 \in A^\mathbb{R}}\forall_{\tau\in\mathbb{R}}\left(\left.x_1\right|_{t \leq \tau}=\left.\left.x_2\right|_{t \leq \tau} \Rightarrow S\left(x_1\right)\right|_{t \leq \tau}=\left.S\left(x_2\right)\right|_{t \leq \tau}\right)$. That is, if two inputs are identical up to $\tau$, then the outputs are identical up to $\tau$. It is strictly causal if $\leq$ is changed to $<$ (typically used in feedback systems).
### 29-30
* A system is memoryless if it does not rely on past inputs, AKA can be written as a function of only $x(t)$ at a time $t$ ([ANALYSIS] can easily be represented with `map` in FRP). The Integrator actor is not memoryless, but an adder is.
* If a system is strictly causal and memoryless, then its output is constant for all inputs.
* Linear and time invariant (LTI) systems are both linear, and time invariant...
	* A system is linear if it satisfies superposition: $\forall x_1, x_2 \in X$ and $\forall a, b \in \mathbb{R}, \quad S\left(a x_1+b x_2\right)=a S\left(x_1\right)+b S\left(x_2\right)$.
	* A system is time-invariant if "sliding" the value for $t$ does not change the result. In other words...
		* If $\forall x \in X$ and $\forall t \in \mathbb{R}, \quad\left(D_\tau(x)\right)(t)=x(t-\tau)$ then $\forall x \in X$ and $\forall \tau \in \mathbb{R}, \quad S\left(D_\tau(x)\right)=D_\tau(S(x))$.
	* If you can achieve an LTI model, you should do so if the sacrifice isn't too great.
### 30
* A system is bounded-input bounded-output stable if there is a maximum bound on the outputs for any inputs which have a maximum bound.
### 31
* A system with feedback has an output feeding into a prior actor. Systems which seek to compensate for error are examples. The value used in the feedback is also called the feedback, and the signal produced from it is called the correction signal. Since it can normally only affect future errors, the system usually includes at least one strictly causal actor.
### 32
* In a proportional control feedback loop, the control signal is scaled by the error
## 38
* 1a: Skipped
* 1b: $\cos\left(\left(2\pi\cdot440\right)\cdot0\right) = \boxed{1}$
* 1c: <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="588px" height="81px" viewBox="-0.5 -0.5 588 81" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-12-22T22:53:28.817Z&quot; agent=&quot;5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.0.0&quot; version=&quot;20.7.4&quot; etag=&quot;0MOs6-LTxmaVM4xq5LXm&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;HjHT-Ih-MMo55OlRp-zI&quot; name=&quot;Page-1&quot;&gt;5VjJbtswEP0aA+0hgVbbOcZLN6RogBRoegoYaSwxpUSBom0pX1/SGlmrlwQOmqQnk4/UkHxv5onywJ5G2WdBkvA794ENLMPPBvZsYFmmfeGoH43kBTIa2wUQCOrjpAq4oY+AoIHokvqQNiZKzpmkSRP0eByDJxsYEYKvm9MWnDVXTUgAHeDGI6yL/qK+DAt07BoV/gVoEJYrmwaORKScjEAaEp+va5A9H9hTwbksWlE2BabJK3kpnvu0Y3S7MQGxPOaBh3wU3CW3s2/mWT53wq+RYD/OMMqKsCUeeH1X7lfmJQlSUBIHujdZh1TCTUI8PbRWmisslBFTPVM1MRwICdnOfZrb06u0AR6BFLmagg9YF7gBzBi7ZHRd8W/aiIU17seIEZQ82IauWFENJOYpJHVZ6lAEvkob7HIhQx7wmLB5hU4EX8Y+6HUM1avmXHGeIHsPIGWONUCWkvdxqxfaz6zaF18KD/acCItSEhGA3Hdyo18qAYxIumpu5PS8Wx3e817ir8i9sp0GWYTRIFZtT3EDQgE6J6mq60sciKjvF7pASh/J/SaeVibhNJabo7iTgTvbl9RoOvhwVep1SfZk1M4SODPO0SWPJhpjXevN16bwxSJVCreV2C75fHGcjjYeTz9kHzsCNfP+5f3DafuH2eMfVo9/DF/KP9wj7CP2L/XbSmcsI2lKvSYvTRIho/IWR3T7t8bPXezNstq0WY6dE7pH+R4+5B5Ov041HdweGUrsuamPaWCPm2mwTYsyRHFMfKr+3mwFcuxWIKcVqOChE+hUhTbsZA95HyboHvJAp8G79dodcdQRKvsfhFLGMzKd1y7O+OQeHKsN3dY7NRfW3cqGN72n+/Dh29m/9Fez/Zpt2+Jb8deLTmbI91G24wNla70xfy3vcftqWH1kJ5ubJck3FCti0z8gvRB5T4uPq2EpAYj5CgolzF5ZFpSxKWdcqTvzYUGWTPbIKbgksi4vCKqOq3MCk+O6QiZpTJKfvCCuz1p2psLxl+BRq6hsq3sJdnrMoV17R9yBVbf6E6PQuvoryJ7/BQ==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 107 0 L 237 40 L 107 80 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 40px; margin-left: 108px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">w_0</div></div></div></foreignObject><text x="172" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">w_0</text></switch></g><path d="M 427 40 L 560.63 40" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 565.88 40 L 558.88 43.5 L 560.63 40 L 558.88 36.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 477px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">y</div></div></div></foreignObject><text x="477" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">y</text></switch></g><rect x="307" y="10" width="120" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 40px; margin-left: 308px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">cos(x)</div></div></div></foreignObject><text x="367" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">cos(x)</text></switch></g><path d="M 237 40 L 300.63 40" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 305.88 40 L 298.88 43.5 L 300.63 40 L 298.88 36.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 39px; margin-left: 259px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">a</div></div></div></foreignObject><text x="259" y="42" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">a</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 293px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">x</div></div></div></foreignObject><text x="293" y="44" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">x</text></switch></g><path d="M 7 40 L 100.63 40" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 105.88 40 L 98.88 43.5 L 100.63 40 L 98.88 36.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 39px; margin-left: 70px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">t</div></div></div></foreignObject><text x="70" y="42" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">t</text></switch></g><ellipse cx="567" cy="40" rx="3" ry="3" fill="rgb(0, 0, 0)" stroke="none" pointer-events="all"/><rect x="547" y="20" width="40" height="40" fill="none" stroke="none" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>
## 43-46
* State machines can model discrete dynamics while ODEs can model continuous components
	* These heavily use discrete events which carry additional values. For example, for a counter, there is an Adder which emits an increase event and a counter which emits the new value whenever it receives the event. This is made mathematical by mapping an instant of time to the presence of the signal ($\mathbb{R} \rightarrow \{absent, present\}$). This is a pure signal. In the example of the counter, it would emit an impure signal which can be modeled with $R \rightarrow \{absent\} \cup \mathbb{Z}$, meaning the output is either absent, or present (carrying the value).
	* The dynamics of a discrete system can be described as a sequence of steps called reactions which are triggered by the surrounding environment. For the counter example, the reactions are triggered by an increase or decrease event, and no reaction occurs when neither event is occurring.
		* A reaction will observe the input values and calculate outputs during the same time $t$. The inputs are also called ports, and there is an accompanying type for each port ($V_p$ is the type of port $p$ and is the set of possible values it can take on when present). Therefore, $p \in V_p \cup \{absent\}$. An input $p$ is valuated when it is assigned a value or absence. $V_p = \{present\}$ for ports receiving pure signals. For systems where the outputs are discrete, this can be used to describe outputs as well, and they are absent when a reaction isn't occurring.
## 48-54
* The state of a system is all the information about that system needed to compute current or future inputs. For any given actor, the state space is a set describing the possible values that actor's state can take on. For example, the Integrator actor has a state space of $\mathbb{R}$ since the previous area is represented as a real number. For the counter example, if we cap the number the counter can go to (e.g., an int limit), then the state space is finite up to that value and thus has a finite state space (FSM for finite-state machine).
	* FSMs can be drawn as arrows between the states in the state space, with one defined as the initial state. The arrows are transitions. Transitions which end in the same state are called self-transitions.
		* Transitions can have a guard/predicate and an action. When the predicate is true, the transition is enabled and will be taken (the action is the state which will be achieved). If no transitions are enabled, no transition occurs.
	* A time-triggered reaction is similar to polling while event-triggered is more similar to true event-based reaction.
* Counter and Integrator are both examples of accumulators.
## 54
* A stutter occurs when the inputs are absent and no guards evaluate to true, and a stuttering reaction occurs when the inputs and outputs are all absent and the machine does not change state.
* A benefit of an FSM is that it defines all possible behavior and can thus be formally checked more easily.
## 55
* A default transition explicitly shows the transition to the same state whenever the other transitions are not enabled and is denoted as "true / " and is drawn with a dashed line. They can always be replaced with ordinary transitions, which negate the other transitions guards. A default transition is then kind of like the default case in a match statement, which can usually be replaced by explicit cases for the other scenarios. When a diagram has both ordinary and default transitions, the ordinary transitions have priority over the default.
* In some state machine formalisms, transitions can be given integer priorities.
* A FSM can be represented as (States, Inputs, Outputs, update, initialState)
	* States is a finite set of states
	* Inputs is a set of input valuations
	* Outputs is a set of output valuations
	* update takes a state and input valuation and returns the next state, and an output valuation ($States \times Inputs \rightarrow States \times Outputs$)
	* initialState is the initial state
	* The "events" of the FSM are reactions. At each reaction, the FSM has a current state and the next state which will become the current state of the next reaction. If s is a function mapping an index number to a corresponding state, then $s(0) = initialState$ 
## 97